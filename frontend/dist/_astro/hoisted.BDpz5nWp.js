import"./Layout.astro_astro_type_script_index_0_lang.CXkCNBTi.js";await fetch("/api/self",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json();throw window.location.href="/login",new Error("Network response was not ok.")});var n=[],r=n[0];await fetch("/api/self/tamagotchis",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json();throw new Error("Network response was not ok.")}).then(t=>{n=t,console.log(n),c()}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)});function c(){for(let t=0;t<n.length;t++)fetch("/api/tamagotchis_sprite/ "+n[t].id).then(o=>{if(o.ok)return o.blob();throw new Error("Network response was not ok.")}).then(o=>{const e=URL.createObjectURL(o),i=document.createElement("img");i.onclick=()=>{r=n[t],a(r)},i.classList.add("inline"),i.src=e,document.getElementById("tamagotchi_list").appendChild(i)}).catch(o=>{console.error("There has been a problem with your fetch operation:",o)})}function a(t){document.getElementById("health_stat").innerText=t.health.toString(),document.getElementById("water_stat").innerText=t.water.toString(),document.getElementById("food_stat").innerText=t.food.toString(),document.getElementById("battery_stat").innerText=t.battery.toString(),document.getElementById("steps_stat").innerText=t.steps.toString()}function s(t,o){fetch("/api/update_stats/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tamagotchi_id:r.id,water:t,food:o})}).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")}).then(e=>{console.log(e),a(e),n[n.indexOf(r)]=e,r=e}).catch(e=>{console.error("There has been a problem with your fetch operation:",e)})}document.getElementById("eat").onclick=()=>{s(0,30)};document.getElementById("drink").onclick=()=>{s(5,0)};
